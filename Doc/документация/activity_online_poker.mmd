flowchart TD
  %% Диаграмма деятельности: основной пользовательский поток онлайн‑покера (кэш‑стол)

  A[Старт] --> B{Пользователь авторизован?}
  B -- Нет --> C[Регистрация/Вход]
  C --> B
  B -- Да --> D[Открыть лобби]

  D --> E[Выбор стола/фильтрация]
  E --> F{Есть доступные столы?}
  F -- Нет --> D
  F -- Да --> G[Подключение к столу]

  G --> H[Внесение блайндов]
  H --> I[Раздача карманных карт]

  %% Цикл раундов торговли: Префлоп → Флоп → Тёрн → Ривер
  subgraph R[Раунды торговли]
    direction TB
    I --> J[Префлоп: ходы игроков]
    J --> K{Все кроме одного сбросили?}
    K -- Да --> W[Победитель по фолду]
    K -- Нет --> L[Открыть флоп]
    L --> M[Флоп: ходы игроков]
    M --> N{Все кроме одного сбросили?}
    N -- Да --> W
    N -- Нет --> O[Открыть тёрн]
    O --> P[Тёрн: ходы игроков]
    P --> Q{Все кроме одного сбросили?}
    Q -- Да --> W
    Q -- Нет --> R2[Открыть ривер]
    R2 --> S[Ривер: ходы игроков]
    S --> T{Все кроме одного сбросили?}
    T -- Да --> W
    T -- Нет --> U[Шоудаун]
  end

  %% Определение победителя и расчёт банка
  W --> X[Распределить банк]
  U --> X
  X --> Y[Обновить баланс и статистику]

  Y --> Z{Игрок остаётся за столом?}
  Z -- Да --> H
  Z -- Нет --> D

  D --> AA[Выход из игры]
  AA --> AB[Конец]

# Требования к геймплею покера

## Введение

Данная спецификация описывает требования к реализации полноценного геймплея онлайн покера в Unity. Система должна обеспечить корректное проведение покерных раздач с определением победителей, управлением ставками и банком, а также логикой ходов игроков.

## Требования

### Требование 1

**Пользовательская история:** Как игрок, я хочу участвовать в полноценной покерной раздаче, чтобы играть по правилам техасского холдема

#### Критерии приемки

1. КОГДА начинается новая раздача ТОГДА система ДОЛЖНА раздать по 2 карты каждому игроку
2. КОГДА все игроки получили карты ТОГДА система ДОЛЖНА начать торги с префлопа
3. КОГДА торги завершены ТОГДА система ДОЛЖНА открыть флоп (3 карты)
4. КОГДА флоп открыт ТОГДА система ДОЛЖНА провести торги на флопе
5. КОГДА торги на флопе завершены ТОГДА система ДОЛЖНА открыть терн (4-я карта)
6. КОГДА терн открыт ТОГДА система ДОЛЖНА провести торги на терне
7. КОГДА торги на терне завершены ТОГДА система ДОЛЖНА открыть ривер (5-я карта)
8. КОГДА ривер открыт ТОГДА система ДОЛЖНА провести финальные торги

### Требование 2

**Пользовательская история:** Как игрок, я хочу делать ставки (фолд, чек, колл, бет, рейз), чтобы участвовать в торгах

#### Критерии приемки

1. КОГДА наступает мой ход ТОГДА система ДОЛЖНА показать доступные действия
2. КОГДА я выбираю фолд ТОГДА система ДОЛЖНА исключить меня из раздачи
3. КОГДА я выбираю чек И нет активной ставки ТОГДА система ДОЛЖНА передать ход следующему игроку
4. КОГДА я выбираю колл И есть активная ставка ТОГДА система ДОЛЖНА уравнять мою ставку с текущей
5. КОГДА я выбираю бет И нет активной ставки ТОГДА система ДОЛЖНА принять мою ставку как новую
6. КОГДА я выбираю рейз И есть активная ставка ТОГДА система ДОЛЖНА увеличить ставку на указанную сумму
7. КОГДА я делаю недопустимое действие ТОГДА система ДОЛЖНА показать ошибку и не принять действие

### Требование 3

**Пользовательская история:** Как игрок, я хочу видеть текущий банк и ставки, чтобы принимать обоснованные решения

#### Критерии приемки

1. КОГДА игрок делает ставку ТОГДА система ДОЛЖНА обновить отображение банка
2. КОГДА игрок делает ставку ТОГДА система ДОЛЖНА показать размер его ставки
3. КОГДА начинается новый круг торгов ТОГДА система ДОЛЖНА обнулить текущие ставки игроков
4. КОГДА раздача завершается ТОГДА система ДОЛЖНА показать итоговый размер банка

### Требование 4

**Пользовательская история:** Как игрок, я хочу чтобы система определяла победителя, чтобы знать результат раздачи

#### Критерии приемки

1. КОГДА торги завершены И остался один игрок ТОГДА система ДОЛЖНА объявить его победителем
2. КОГДА торги завершены И осталось несколько игроков ТОГДА система ДОЛЖНА сравнить их комбинации
3. КОГДА система сравнивает комбинации ТОГДА она ДОЛЖНА определить старшую по правилам покера
4. КОГДА победитель определен ТОГДА система ДОЛЖНА передать ему весь банк
5. КОГДА есть несколько одинаковых комбинаций ТОГДА система ДОЛЖНА разделить банк поровну

### Требование 5

**Пользовательская история:** Как игрок, я хочу видеть свои карты и общие карты стола, чтобы оценивать свою руку

#### Критерии приемки

1. КОГДА раздача начинается ТОГДА система ДОЛЖНА показать мне мои 2 карты
2. КОГДА открывается флоп ТОГДА система ДОЛЖНА показать 3 общие карты
3. КОГДА открывается терн ТОГДА система ДОЛЖНА показать 4-ю общую карту
4. КОГДА открывается ривер ТОГДА система ДОЛЖНА показать 5-ю общую карту
5. КОГДА наступает шоудаун ТОГДА система ДОЛЖНА показать карты всех активных игроков

### Требование 6

**Пользовательская история:** Как игрок, я хочу чтобы система управляла очередностью ходов, чтобы игра проходила по правилам

#### Критерии приемки

1. КОГДА начинается круг торгов ТОГДА система ДОЛЖНА определить первого игрока для хода
2. КОГДА игрок сделал ход ТОГДА система ДОЛЖНА передать ход следующему активному игроку
3. КОГДА все активные игроки сделали равные ставки ТОГДА система ДОЛЖНА завершить круг торгов
4. КОГДА игрок превысил время на ход ТОГДА система ДОЛЖНА автоматически сделать фолд
5. КОГДА остался один активный игрок ТОГДА система ДОЛЖНА завершить раздачу

### Требование 7

**Пользовательская история:** Как игрок, я хочу видеть таймер хода, чтобы знать сколько времени у меня есть на принятие решения

#### Критерии приемки

1. КОГДА наступает мой ход ТОГДА система ДОЛЖНА запустить таймер
2. КОГДА таймер идет ТОГДА система ДОЛЖНА показывать оставшееся время
3. КОГДА время истекает ТОГДА система ДОЛЖНА автоматически сделать фолд за игрока
4. КОГДА я делаю ход ТОГДА система ДОЛЖНА остановить таймер

### Требование 8

**Пользовательская история:** Как игрок, я хочу чтобы система корректно обрабатывала блайнды, чтобы игра соответствовала правилам покера

#### Критерии приемки

1. КОГДА начинается раздача ТОГДА система ДОЛЖНА определить позиции малого и большого блайнда
2. КОГДА определены позиции блайндов ТОГДА система ДОЛЖНА автоматически поставить блайнды
3. КОГДА блайнды поставлены ТОГДА система ДОЛЖНА начать торги с игрока слева от большого блайнда
4. КОГДА раздача завершается ТОГДА система ДОЛЖНА сдвинуть позицию дилера на следующего игрока
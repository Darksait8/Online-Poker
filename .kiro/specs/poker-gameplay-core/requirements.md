# Требования к основному геймплею покера

## Введение

Данный документ описывает требования к реализации полноценного геймплея покера в Unity проекте. Цель - превратить существующую визуальную основу в функциональную покерную игру с правильной логикой ставок, очередности ходов и определения победителя.

## Требования

### Требование 1: Система отображения карт

**Пользовательская история:** Как игрок, я хочу видеть реальные карты вместо рубашек, чтобы понимать свою руку и общие карты на столе.

#### Критерии приемки

1. КОГДА игра начинается ТОГДА система ДОЛЖНА отображать реальные спрайты карт вместо рубашек
2. КОГДА карта раздается игроку ТОГДА система ДОЛЖНА показать правильный спрайт карты (масть и ранг)
3. КОГДА открывается флоп/терн/ривер ТОГДА система ДОЛЖНА отображать соответствующие спрайты карт на борде

### Требование 2: Модель игроков и стола

**Пользовательская история:** Как игрок, я хочу чтобы игра отслеживала состояние всех игроков за столом, чтобы геймплей был корректным.

#### Критерии приемки

1. КОГДА игрок садится за стол ТОГДА система ДОЛЖНА создать модель игрока с уникальным ID, именем и стеком
2. КОГДА начинается раздача ТОГДА система ДОЛЖНА определить позицию дилера и очередность ходов
3. КОГДА игрок покидает стол ТОГДА система ДОЛЖНА корректно обновить модель стола и перестроить очередность

### Требование 3: Система блайндов

**Пользовательская история:** Как игрок, я хочу чтобы блайнды автоматически ставились перед каждой раздачей, чтобы игра соответствовала правилам покера.

#### Критерии приемки

1. КОГДА начинается новая раздача ТОГДА система ДОЛЖНА автоматически поставить малый блайнд с игрока слева от дилера
2. КОГДА малый блайнд поставлен ТОГДА система ДОЛЖНА автоматически поставить большой блайнд со следующего игрока
3. КОГДА блайнды поставлены ТОГДА система ДОЛЖНА списать соответствующие суммы со стеков игроков и отобразить их ставки

### Требование 4: Очередность ходов

**Пользовательская история:** Как игрок, я хочу чтобы ходы происходили в правильном порядке, чтобы игра была честной и понятной.

#### Критерии приемки

1. КОГДА наступает ход игрока ТОГДА система ДОЛЖНА активировать панель действий только для этого игрока
2. КОГДА игрок не на ходу ТОГДА система ДОЛЖНА заблокировать панель действий для него
3. КОГДА игрок сделал ход ТОГДА система ДОЛЖНА передать ход следующему игроку по часовой стрелке
4. КОГДА все игроки сделали ход в раунде торговли ТОГДА система ДОЛЖНА перейти к следующей улице или шоудауну

### Требование 5: Система ставок и банка

**Пользовательская история:** Как игрок, я хочу чтобы мои ставки корректно обрабатывались и отображались, чтобы понимать текущее состояние игры.

#### Критерии приемки

1. КОГДА игрок делает ставку ТОГДА система ДОЛЖНА списать сумму с его стека и добавить в банк
2. КОГДА игрок делает колл ТОГДА система ДОЛЖНА списать сумму равную текущей ставке
3. КОГДА игрок делает рейз ТОГДА система ДОЛЖНА увеличить текущую ставку и обновить минимальную сумму для колла
4. КОГДА игрок делает фолд ТОГДА система ДОЛЖНА исключить его из текущей раздачи
5. КОГДА происходит любое действие ТОГДА система ДОЛЖНА обновить отображение стеков, ставок и банка

### Требование 6: Определение победителя

**Пользовательская история:** Как игрок, я хочу чтобы система автоматически определяла победителя по покерным комбинациям, чтобы результат был справедливым.

#### Критерии приемки

1. КОГДА наступает шоудаун ТОГДА система ДОЛЖНА оценить комбинации всех активных игроков
2. КОГДА комбинации оценены ТОГДА система ДОЛЖНА определить лучшую руку согласно правилам покера
3. КОГДА победитель определен ТОГДА система ДОЛЖНА передать ему весь банк
4. КОГДА есть несколько одинаковых лучших рук ТОГДА система ДОЛЖНА разделить банк поровну между победителями

### Требование 7: Переход между раздачами

**Пользовательская история:** Как игрок, я хочу чтобы после завершения раздачи автоматически начиналась новая, чтобы игра продолжалась непрерывно.

#### Критерии приемки

1. КОГДА раздача завершена ТОГДА система ДОЛЖНА сдвинуть позицию дилера на одно место по часовой стрелке
2. КОГДА новый дилер определен ТОГДА система ДОЛЖНА начать новую раздачу с раздачи карт
3. КОГДА у игрока закончились фишки ТОГДА система ДОЛЖНА исключить его из игры или предложить докупить фишки

### Требование 8: Таймер ходов

**Пользовательская история:** Как игрок, я хочу чтобы на каждый ход был ограниченный таймер, чтобы игра не затягивалась.

#### Критерии приемки

1. КОГДА наступает ход игрока ТОГДА система ДОЛЖНА запустить таймер на 30 секунд
2. КОГДА таймер истекает ТОГДА система ДОЛЖНА автоматически сделать фолд за игрока
3. КОГДА игрок делает ход ТОГДА система ДОЛЖНА остановить таймер и передать ход следующему игроку